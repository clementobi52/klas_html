<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SLTR Applications - KLAS</title>
<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- Lucide Icons -->
<script src="https://unpkg.com/lucide@latest"></script>
<style>
    /* Custom styles */
    :root {
        --primary: #3b82f6;
        --primary-foreground: #ffffff;
        --muted: #f3f4f6;
        --muted-foreground: #6b7280;
        --border: #e5e7eb;
        --ring: #3b82f6;
        --success: #10b981;
        --warning: #f59e0b;
        --destructive: #ef4444;
        --secondary: #f1f5f9;
        --secondary-foreground: #0f172a;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        color: #0f172a;
        background-color: #f8fafc;
    }

    /* Card styles */
    .card {
        background-color: white;
        border-radius: 0.5rem;
        border: 1px solid var(--border);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    /* Button styles */
    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: 0.375rem;
        font-weight: 500;
        font-size: 0.875rem;
        line-height: 1.25rem;
        padding: 0.5rem 1rem;
        transition: all 0.2s;
        cursor: pointer;
        border: none;
    }

    .btn-primary {
        background-color: var(--primary);
        color: var(--primary-foreground);
    }

    .btn-primary:hover {
        background-color: #2563eb;
    }

    .btn-outline {
        background-color: transparent;
        border: 1px solid var(--border);
        color: #374151;
    }

    .btn-outline:hover {
        background-color: var(--muted);
    }

    .btn-ghost {
        background-color: transparent;
        color: #374151;
    }

    .btn-ghost:hover {
        background-color: var(--muted);
    }

    .btn-sm {
        padding: 0.25rem 0.5rem;
        font-size: 0.75rem;
        height: 2rem;
        width: 2rem;
    }

    .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    /* Input styles */
    .input {
        display: block;
        width: 100%;
        border-radius: 0.375rem;
        border: 1px solid var(--border);
        padding: 0.5rem 0.75rem;
        font-size: 0.875rem;
        line-height: 1.25rem;
        background-color: white;
    }

    .input:focus {
        outline: none;
        border-color: var(--ring);
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
    }

    /* Select styles */
    .select {
        display: block;
        width: 100%;
        border-radius: 0.375rem;
        border: 1px solid var(--border);
        padding: 0.5rem 0.75rem;
        font-size: 0.875rem;
        line-height: 1.25rem;
        background-color: white;
        appearance: none;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
        background-position: right 0.5rem center;
        background-repeat: no-repeat;
        background-size: 1.5em 1.5em;
        padding-right: 2.5rem;
    }

    .select:focus {
        outline: none;
        border-color: var(--ring);
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
    }

    /* Badge styles */
    .badge {
        display: inline-flex;
        align-items: center;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 500;
        line-height: 1;
        padding: 0.25rem 0.5rem;
        white-space: nowrap;
    }

    .badge-default {
        background-color: var(--primary);
        color: var(--primary-foreground);
    }

    .badge-outline {
        background-color: transparent;
        border: 1px solid var(--border);
        color: #374151;
    }

    .badge-secondary {
        background-color: var(--secondary);
        color: var(--secondary-foreground);
    }

    .badge-success {
        background-color: var(--success);
        color: white;
    }

    .badge-destructive {
        background-color: var(--destructive);
        color: white;
    }

    /* Tab styles */
    .tabs-list {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        background-color: var(--muted);
        border-radius: 0.375rem;
        padding: 0.25rem;
        margin-bottom: 1rem;
    }

    .tab-trigger {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0.5rem 1rem;
        border-radius: 0.25rem;
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
        background-color: transparent;
        color: var(--muted-foreground);
        border: none;
    }

    .tab-trigger.active {
        background-color: white;
        color: var(--primary);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .tab-content {
        display: none;
    }

    .tab-content.active {
        display: block;
    }

    /* Dropdown styles */
    .dropdown {
        position: relative;
        display: inline-block;
    }

    .dropdown-content {
        position: absolute;
        top: 100%;
        right: 0;
        z-index: 50;
        background-color: white;
        border: 1px solid var(--border);
        border-radius: 0.5rem;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        padding: 0.5rem 0;
        min-width: 14rem;
        margin-top: 0.25rem;
        display: none;
    }

    .dropdown-content.show {
        display: block;
    }

    .dropdown-item {
        display: flex;
        align-items: center;
        padding: 0.5rem 1rem;
        font-size: 0.875rem;
        cursor: pointer;
        transition: background-color 0.2s;
        width: 100%;
        text-align: left;
        border: none;
        background: none;
        color: #374151;
    }

    .dropdown-item:hover {
        background-color: var(--muted);
    }

    /* Table styles */
    .table {
        width: 100%;
        border-collapse: collapse;
    }

    .table th,
    .table td {
        padding: 0.75rem;
        text-align: left;
        border-bottom: 1px solid var(--border);
        vertical-align: top;
    }

    .table th {
        font-weight: 500;
        color: var(--muted-foreground);
        font-size: 0.875rem;
        background-color: rgba(243, 244, 246, 0.5);
    }

    .table tbody tr:hover {
        background-color: rgba(243, 244, 246, 0.3);
    }

    /* Modal styles */
    .modal {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 100;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
    }

    .modal.show {
        opacity: 1;
        visibility: visible;
    }

    .modal-content {
        background-color: white;
        border-radius: 0.5rem;
        max-width: 64rem;
        width: 90%;
        max-height: 90vh;
        overflow: hidden;
        transform: scale(0.9);
        transition: transform 0.3s ease;
    }

    .modal.show .modal-content {
        transform: scale(1);
    }

    .modal-header {
        padding: 1.5rem;
        border-bottom: 1px solid var(--border);
    }

    .modal-body {
        padding: 1.5rem;
        max-height: 70vh;
        overflow-y: auto;
    }

    /* Utility classes */
    .hidden { display: none !important; }
    .text-center { text-align: center; }
    .text-right { text-align: right; }
    .text-left { text-align: left; }
    .font-medium { font-weight: 500; }
    .font-semibold { font-weight: 600; }
    .font-bold { font-weight: 700; }
    .text-sm { font-size: 0.875rem; }
    .text-xs { font-size: 0.75rem; }
    .text-lg { font-size: 1.125rem; }
    .text-xl { font-size: 1.25rem; }
    .text-2xl { font-size: 1.5rem; }
    .mb-1 { margin-bottom: 0.25rem; }
    .mb-2 { margin-bottom: 0.5rem; }
    .mb-4 { margin-bottom: 1rem; }
    .mb-6 { margin-bottom: 1.5rem; }
    .mt-1 { margin-top: 0.25rem; }
    .mt-2 { margin-top: 0.5rem; }
    .mt-4 { margin-top: 1rem; }
    .mr-2 { margin-right: 0.5rem; }
    .ml-2 { margin-left: 0.5rem; }
    .p-2 { padding: 0.5rem; }
    .p-3 { padding: 0.75rem; }
    .p-4 { padding: 1rem; }
    .p-6 { padding: 1.5rem; }
    .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
    .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
    .py-6 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
    .pb-2 { padding-bottom: 0.5rem; }
    .pt-4 { padding-top: 1rem; }
    .pl-8 { padding-left: 2rem; }
    .gap-1 { gap: 0.25rem; }
    .gap-2 { gap: 0.5rem; }
    .gap-3 { gap: 0.75rem; }
    .gap-4 { gap: 1rem; }
    .gap-6 { gap: 1.5rem; }
    .flex { display: flex; }
    .flex-col { flex-direction: column; }
    .flex-1 { flex: 1 1 0%; }
    .items-center { align-items: center; }
    .items-start { align-items: flex-start; }
    .justify-center { justify-content: center; }
    .justify-between { justify-content: space-between; }
    .justify-end { justify-content: flex-end; }
    .space-y-1 > * + * { margin-top: 0.25rem; }
    .space-y-2 > * + * { margin-top: 0.5rem; }
    .space-y-4 > * + * { margin-top: 1rem; }
    .space-y-6 > * + * { margin-top: 1.5rem; }
    .grid { display: grid; }
    .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
    .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    .grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    .grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
    .w-full { width: 100%; }
    .w-4 { width: 1rem; }
    .w-6 { width: 1.5rem; }
    .w-8 { width: 2rem; }
    .w-56 { width: 14rem; }
    .w-180 { width: 180px; }
    .w-300 { width: 300px; }
    .h-4 { width: 1rem; height: 1rem; }
    .h-6 { width: 1.5rem; height: 1.5rem; }
    .h-8 { width: 2rem; height: 2rem; }
    .h-full { height: 100%; }
    .max-w-full { max-width: 100%; }
    .overflow-hidden { overflow: hidden; }
    .relative { position: relative; }
    .absolute { position: absolute; }
    .left-2 { left: 0.5rem; }
    .left-2-5 { left: 0.625rem; }
    .top-2 { top: 0.5rem; }
    .top-2-5 { top: 0.625rem; }
    .right-0 { right: 0; }
    .border { border-width: 1px; }
    .border-b { border-bottom-width: 1px; }
    .border-t { border-top-width: 1px; }
    .rounded { border-radius: 0.25rem; }
    .rounded-md { border-radius: 0.375rem; }
    .rounded-lg { border-radius: 0.5rem; }
    .rounded-full { border-radius: 9999px; }
    .bg-white { background-color: white; }
    .bg-blue-100 { background-color: #dbeafe; }
    .bg-blue-600 { background-color: #2563eb; }
    .bg-purple-100 { background-color: #f3e8ff; }
    .bg-purple-600 { background-color: #9333ea; }
    .bg-amber-100 { background-color: #fef3c7; }
    .bg-amber-600 { background-color: #d97706; }
    .bg-green-100 { background-color: #dcfce7; }
    .bg-green-600 { background-color: #16a34a; }
    .bg-muted { background-color: var(--muted); }
    .bg-muted-50 { background-color: rgba(243, 244, 246, 0.5); }
    .text-blue-500 { color: #3b82f6; }
    .text-blue-600 { color: #2563eb; }
    .text-purple-500 { color: #a855f7; }
    .text-purple-600 { color: #9333ea; }
    .text-amber-500 { color: #f59e0b; }
    .text-amber-600 { color: #d97706; }
    .text-green-500 { color: #22c55e; }
    .text-green-600 { color: #16a34a; }
    .text-gray-700 { color: #374151; }
    .text-muted-foreground { color: var(--muted-foreground); }
    .cursor-pointer { cursor: pointer; }
    .divide-y > * + * { border-top-width: 1px; }
    .mx-auto { margin-left: auto; margin-right: auto; }
    .container { width: 100%; max-width: 1200px; margin: 0 auto; padding: 0 1rem; }

    /* Responsive design */
    @media (min-width: 768px) {
        .md\\:flex-row { flex-direction: row; }
        .md\\:items-center { align-items: center; }
        .md\\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        .md\\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
        .md\\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
        .md\\:w-auto { width: auto; }
        .md\\:w-300 { width: 300px; }
    }
</style>
</head>
<body class="bg-gray-50">
<div class="container mx-auto py-6 space-y-6">
    <!-- Page Header -->
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
        <div>
            <h1 class="text-2xl font-bold">SLTR Applications</h1>
            <p class="text-muted-foreground">Manage Systematic Land Titling and Registration applications</p>
        </div>
    </div>

    <!-- Main Dashboard View -->
    <div id="dashboard-view">
        <!-- Statistics Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="card">
                <div class="p-4">
                    <div class="flex flex-col items-center justify-center h-full text-center">
                        <div class="rounded-full bg-blue-100 p-3 mb-2">
                            <i data-lucide="home" class="h-6 w-6 text-blue-600"></i>
                        </div>
                        <h3 class="text-lg font-medium">Residential</h3>
                        <p class="text-sm text-muted-foreground mb-2">124 Applications</p>
                        <p class="text-xs text-green-600">32 Approved</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="p-4">
                    <div class="flex flex-col items-center justify-center h-full text-center">
                        <div class="rounded-full bg-purple-100 p-3 mb-2">
                            <i data-lucide="building" class="h-6 w-6 text-purple-600"></i>
                        </div>
                        <h3 class="text-lg font-medium">Commercial</h3>
                        <p class="text-sm text-muted-foreground mb-2">87 Applications</p>
                        <p class="text-xs text-green-600">45 Approved</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="p-4">
                    <div class="flex flex-col items-center justify-center h-full text-center">
                        <div class="rounded-full bg-amber-100 p-3 mb-2">
                            <i data-lucide="warehouse" class="h-6 w-6 text-amber-600"></i>
                        </div>
                        <h3 class="text-lg font-medium">Warehouse</h3>
                        <p class="text-sm text-muted-foreground mb-2">36 Applications</p>
                        <p class="text-xs text-green-600">18 Approved</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="p-4">
                    <div class="flex flex-col items-center justify-center h-full text-center">
                        <div class="rounded-full bg-green-100 p-3 mb-2">
                            <i data-lucide="tractor" class="h-6 w-6 text-green-600"></i>
                        </div>
                        <h3 class="text-lg font-medium">Agriculture</h3>
                        <p class="text-sm text-muted-foreground mb-2">52 Applications</p>
                        <p class="text-xs text-green-600">29 Approved</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Search and Filter Controls -->
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-4">
            <div class="flex flex-col md:flex-row gap-2 w-full md:w-auto">
                <div class="relative w-full md:w-300">
                    <i data-lucide="search" class="absolute left-2-5 top-2-5 h-4 w-4 text-muted-foreground"></i>
                    <input id="search-input" type="text" placeholder="Search applications..." class="input pl-8">
                </div>

                <div class="flex gap-2">
                    <select id="type-filter" class="select w-180">
                        <option value="all">All Types</option>
                        <option value="residential">Residential</option>
                        <option value="commercial">Commercial</option>
                        <option value="warehouse">Warehouse</option>
                        <option value="agriculture">Agriculture</option>
                    </select>

                    <select id="sort-filter" class="select w-180">
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                        <option value="name">Applicant Name</option>
                        <option value="status">Status</option>
                    </select>
                </div>
            </div>

            <div class="flex gap-2 w-full md:w-auto">
                <button id="export-btn" class="btn btn-outline w-full md:w-auto">
                    <i data-lucide="download" class="h-4 w-4 mr-2"></i>
                    Export
                </button>

                <div class="dropdown">
                    <button id="new-application-btn" class="btn btn-primary flex items-center w-full md:w-auto">
                        <i data-lucide="plus" class="h-4 w-4 mr-2"></i>
                        New Application
                        <i data-lucide="chevron-down" class="h-4 w-4 ml-2"></i>
                    </button>

                    <div id="application-dropdown" class="dropdown-content">
                        <button class="dropdown-item" data-type="residential">
                            <i data-lucide="home" class="h-4 w-4 mr-2 text-blue-500"></i>
                            Residential
                        </button>
                        <button class="dropdown-item" data-type="commercial">
                            <i data-lucide="building" class="h-4 w-4 mr-2 text-purple-500"></i>
                            Commercial
                        </button>
                        <button class="dropdown-item" data-type="warehouse">
                            <i data-lucide="warehouse" class="h-4 w-4 mr-2 text-amber-500"></i>
                            Warehouse
                        </button>
                        <button class="dropdown-item" data-type="agriculture">
                            <i data-lucide="tractor" class="h-4 w-4 mr-2 text-green-500"></i>
                            Agriculture
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="w-full">
            <div class="tabs-list">
                <button class="tab-trigger active" data-tab="all">All Applications</button>
                <button class="tab-trigger" data-tab="pending">Pending</button>
                <button class="tab-trigger" data-tab="approved">Approved</button>
                <button class="tab-trigger" data-tab="rejected">Rejected</button>
            </div>

            <!-- Tab Contents -->
            <div id="all-tab" class="tab-content active">
                <div class="card">
                    <div class="p-0">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Application ID</th>
                                    <th>Applicant</th>
                                    <th>Type</th>
                                    <th>Location</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th class="text-right">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="all-applications-table">
                                <!-- Applications will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="pending-tab" class="tab-content">
                <div class="card">
                    <div class="p-0">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Application ID</th>
                                    <th>Applicant</th>
                                    <th>Type</th>
                                    <th>Location</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th class="text-right">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="pending-applications-table">
                                <!-- Pending applications will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="approved-tab" class="tab-content">
                <div class="card">
                    <div class="p-0">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Application ID</th>
                                    <th>Applicant</th>
                                    <th>Type</th>
                                    <th>Location</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th class="text-right">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="approved-applications-table">
                                <!-- Approved applications will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="rejected-tab" class="tab-content">
                <div class="card">
                    <div class="p-0">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Application ID</th>
                                    <th>Applicant</th>
                                    <th>Type</th>
                                    <th>Location</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th class="text-right">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="rejected-applications-table">
                                <!-- Rejected applications will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Application Form Modal -->
    <div id="application-form-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="flex justify-between items-center">
                    <h2 id="form-title" class="text-xl font-semibold">New SLTR Application</h2>
                    <button id="close-form-btn" class="btn btn-ghost btn-sm">
                        <i data-lucide="x" class="h-4 w-4"></i>
                    </button>
                </div>
            </div>
            <div class="modal-body">
                <div class="text-center py-8">
                    <div class="mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-muted">
                        <i data-lucide="file-text" class="h-6 w-6"></i>
                    </div>
                    <h3 class="mb-2 text-lg font-medium">Application Form</h3>
                    <p class="mb-4 text-sm text-muted-foreground">
                        The detailed SLTR application form would be displayed here.
                    </p>
                    <p class="text-sm text-muted-foreground">
                        This would include fields for applicant information, property details, 
                        document uploads, and all required SLTR application data.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Initialize Lucide icons
    lucide.createIcons();

    // Mock data for applications
    const mockApplications = [
        {
            id: "SLTR-2023-001",
            applicant: "John Doe",
            type: "residential",
            location: "Garki District, Abuja",
            date: "2023-06-15",
            status: "pending"
        },
        {
            id: "SLTR-2023-002",
            applicant: "ABC Corporation",
            type: "commercial",
            location: "Central Business District, Abuja",
            date: "2023-06-14",
            status: "approved"
        },
        {
            id: "SLTR-2023-003",
            applicant: "XYZ Logistics Ltd",
            type: "warehouse",
            location: "Idu Industrial Area, Abuja",
            date: "2023-06-13",
            status: "pending"
        },
        {
            id: "SLTR-2023-004",
            applicant: "Ministry of Agriculture",
            type: "agriculture",
            location: "Gwagwalada Area Council",
            date: "2023-06-12",
            status: "rejected"
        },
        {
            id: "SLTR-2023-005",
            applicant: "Jane Smith",
            type: "residential",
            location: "Wuse II, Abuja",
            date: "2023-06-11",
            status: "approved"
        }
    ];

    // State management
    let currentTab = 'all';
    let searchQuery = '';
    let typeFilter = 'all';
    let sortFilter = 'newest';

    // DOM elements
    const elements = {
        dashboardView: document.getElementById('dashboard-view'),
        searchInput: document.getElementById('search-input'),
        typeFilter: document.getElementById('type-filter'),
        sortFilter: document.getElementById('sort-filter'),
        exportBtn: document.getElementById('export-btn'),
        newApplicationBtn: document.getElementById('new-application-btn'),
        applicationDropdown: document.getElementById('application-dropdown'),
        applicationFormModal: document.getElementById('application-form-modal'),
        formTitle: document.getElementById('form-title'),
        closeFormBtn: document.getElementById('close-form-btn'),
        tabTriggers: document.querySelectorAll('.tab-trigger'),
        tabContents: document.querySelectorAll('.tab-content'),
        allApplicationsTable: document.getElementById('all-applications-table'),
        pendingApplicationsTable: document.getElementById('pending-applications-table'),
        approvedApplicationsTable: document.getElementById('approved-applications-table'),
        rejectedApplicationsTable: document.getElementById('rejected-applications-table')
    };

    // Helper functions
    function getStatusBadgeClass(status) {
        switch (status) {
            case 'approved': return 'badge-success';
            case 'rejected': return 'badge-destructive';
            case 'pending': return 'badge-default';
            default: return 'badge-outline';
        }
    }

    function getTypeIcon(type) {
        const icons = {
            residential: 'home',
            commercial: 'building',
            warehouse: 'warehouse',
            agriculture: 'tractor'
        };
        return icons[type] || 'home';
    }

    function getTypeColor(type) {
        const colors = {
            residential: 'text-blue-500',
            commercial: 'text-purple-500',
            warehouse: 'text-amber-500',
            agriculture: 'text-green-500'
        };
        return colors[type] || 'text-gray-500';
    }

    function filterApplications(status) {
        let filtered = mockApplications;

        // Filter by status
        if (status !== 'all') {
            filtered = filtered.filter(app => app.status === status);
        }

        // Filter by type
        if (typeFilter !== 'all') {
            filtered = filtered.filter(app => app.type === typeFilter);
        }

        // Filter by search query
        if (searchQuery) {
            filtered = filtered.filter(app =>
                app.applicant.toLowerCase().includes(searchQuery.toLowerCase()) ||
                app.id.toLowerCase().includes(searchQuery.toLowerCase()) ||
                app.location.toLowerCase().includes(searchQuery.toLowerCase())
            );
        }

        // Sort applications
        filtered.sort((a, b) => {
            switch (sortFilter) {
                case 'newest':
                    return new Date(b.date) - new Date(a.date);
                case 'oldest':
                    return new Date(a.date) - new Date(b.date);
                case 'name':
                    return a.applicant.localeCompare(b.applicant);
                case 'status':
                    return a.status.localeCompare(b.status);
                default:
                    return 0;
            }
        });

        return filtered;
    }

    function renderApplicationsTable(tableElement, status) {
        const applications = filterApplications(status);
        tableElement.innerHTML = '';

        if (applications.length === 0) {
            tableElement.innerHTML = `
                <tr>
                    <td colspan="7" class="text-center py-4">No applications found</td>
                </tr>
            `;
            return;
        }

        applications.forEach(app => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td class="font-medium">${app.id}</td>
                <td>${app.applicant}</td>
                <td>
                    <div class="flex items-center gap-1">
                        <i data-lucide="${getTypeIcon(app.type)}" class="h-4 w-4 ${getTypeColor(app.type)}"></i>
                        <span class="capitalize">${app.type}</span>
                    </div>
                </td>
                <td>${app.location}</td>
                <td>${app.date}</td>
                <td>
                    <span class="badge ${getStatusBadgeClass(app.status)}">
                        ${app.status.charAt(0).toUpperCase() + app.status.slice(1)}
                    </span>
                </td>
                <td class="text-right">
                    <div class="flex items-center justify-end gap-1">
                        <button class="btn btn-ghost btn-sm" onclick="viewApplication('${app.id}')">
                            <i data-lucide="eye" class="h-4 w-4"></i>
                        </button>
                        <button class="btn btn-ghost btn-sm" onclick="editApplication('${app.id}')">
                            <i data-lucide="edit" class="h-4 w-4"></i>
                        </button>
                        ${app.status === 'pending' ? `
                            <button class="btn btn-ghost btn-sm" onclick="approveApplication('${app.id}')">
                                <i data-lucide="check-circle" class="h-4 w-4"></i>
                            </button>
                            <button class="btn btn-ghost btn-sm" onclick="rejectApplication('${app.id}')">
                                <i data-lucide="x-circle" class="h-4 w-4"></i>
                            </button>
                        ` : ''}
                    </div>
                </td>
            `;
            tableElement.appendChild(row);
        });

        // Re-initialize Lucide icons
        lucide.createIcons();
    }

    function renderAllTables() {
        renderApplicationsTable(elements.allApplicationsTable, 'all');
        renderApplicationsTable(elements.pendingApplicationsTable, 'pending');
        renderApplicationsTable(elements.approvedApplicationsTable, 'approved');
        renderApplicationsTable(elements.rejectedApplicationsTable, 'rejected');
    }

    function switchTab(tabName) {
        currentTab = tabName;
        
        // Update tab triggers
        elements.tabTriggers.forEach(trigger => {
            trigger.classList.remove('active');
            if (trigger.dataset.tab === tabName) {
                trigger.classList.add('active');
            }
        });

        // Update tab contents
        elements.tabContents.forEach(content => {
            content.classList.remove('active');
            if (content.id === `${tabName}-tab`) {
                content.classList.add('active');
            }
        });
    }

    function openApplicationForm(type) {
        const typeNames = {
            residential: 'Residential',
            commercial: 'Commercial',
            warehouse: 'Warehouse',
            agriculture: 'Agriculture'
        };
        
        elements.formTitle.textContent = `New ${typeNames[type]} SLTR Application`;
        elements.applicationFormModal.classList.add('show');
        elements.applicationDropdown.classList.remove('show');
    }

    function closeApplicationForm() {
        elements.applicationFormModal.classList.remove('show');
    }

    // Global functions for onclick handlers
    window.viewApplication = function(id) {
        alert(`Viewing application: ${id}`);
    };

    window.editApplication = function(id) {
        alert(`Editing application: ${id}`);
    };

    window.approveApplication = function(id) {
        if (confirm(`Approve application ${id}?`)) {
            alert(`Application ${id} approved`);
            // Update application status and re-render tables
            const app = mockApplications.find(a => a.id === id);
            if (app) app.status = 'approved';
            renderAllTables();
        }
    };

    window.rejectApplication = function(id) {
        if (confirm(`Reject application ${id}?`)) {
            alert(`Application ${id} rejected`);
            // Update application status and re-render tables
            const app = mockApplications.find(a => a.id === id);
            if (app) app.status = 'rejected';
            renderAllTables();
        }
    };

    // Event listeners
    elements.searchInput.addEventListener('input', (e) => {
        searchQuery = e.target.value;
        renderAllTables();
    });

    elements.typeFilter.addEventListener('change', (e) => {
        typeFilter = e.target.value;
        renderAllTables();
    });

    elements.sortFilter.addEventListener('change', (e) => {
        sortFilter = e.target.value;
        renderAllTables();
    });

    elements.exportBtn.addEventListener('click', () => {
        alert('Exporting applications data...');
    });

    elements.newApplicationBtn.addEventListener('click', () => {
        elements.applicationDropdown.classList.toggle('show');
    });

    elements.closeFormBtn.addEventListener('click', closeApplicationForm);

    elements.applicationFormModal.addEventListener('click', (e) => {
        if (e.target === elements.applicationFormModal) {
            closeApplicationForm();
        }
    });

    // Dropdown item handlers
    document.querySelectorAll('.dropdown-item').forEach(item => {
        item.addEventListener('click', () => {
            const type = item.dataset.type;
            openApplicationForm(type);
        });
    });

    // Tab triggers
    elements.tabTriggers.forEach(trigger => {
        trigger.addEventListener('click', () => {
            switchTab(trigger.dataset.tab);
        });
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', (e) => {
        if (!e.target.closest('.dropdown')) {
            elements.applicationDropdown.classList.remove('show');
        }
    });

    // Initialize the page
    function init() {
        renderAllTables();
        lucide.createIcons();
    }

    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>